<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui">

    <composite:interface>
    </composite:interface>

    <composite:implementation>



        <h:outputText
            styleClass="alert alert-danger block margin-top-most"
            value="#{msgs.noAccessAllowed} Plugin_Goobi_ProjectExport"
            rendered="#{!LoginForm.hasRole('Plugin_Goobi_ProjectExport')}" />

        <h:panelGroup rendered="#{LoginForm.hasRole('Plugin_Goobi_ProjectExport')}">
            <div class="row">
                <div class="col-sm-12">
                    <div class="box box-color box-bordered lightgrey">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-plug"></i>
                                <h:outputText value="#{msgs[NavigationForm.workflowPlugin.title]}" />
                            </h3>
                        </div>
                        <div class="box-content">
                            <h:form id="projectExportForm">

                                <h:panelGroup rendered="#{!NavigationForm.workflowPlugin.exportAllowed}">
                                    <h:outputText
                                        value="#{NavigationForm.workflowPlugin.projectValidationError}"
                                        styleClass="alert alert-danger" />
                                </h:panelGroup>
                                <div
                                    class="row"
                                    style="padding: 15px;">

                                    <intranda:formInputDropDownAjax
                                        ajaxEvent="change"
                                        ajaxRender="projectExportForm"
                                        label="#{msgs.projekt}"
                                        field="#{NavigationForm.workflowPlugin.projectName}"
                                        help=""
                                        name="project"
                                        selectItems="#{NavigationForm.workflowPlugin.allProjectNames}"
                                        fieldStyle="form-control"
                                        required="false"
                                        itemValue="#{var}"
                                        itemLabel="#{var}" />
                                </div>

                                <h:panelGroup
                                    layout="block"
                                    styleClass="form-actions"
                                    rendered="#{NavigationForm.workflowPlugin.exportAllowed}">
                                    <h:commandLink
                                        styleClass="btn submitOnEnter pull-right font-size-s margin-bottom-most"
                                        id="export"
                                        type="submit"
                                        action="#{NavigationForm.workflowPlugin.prepareExport}">
                                        <i class="fa fa-globe margin-right-5"></i>
                                        <h:outputText value="#{msgs.exportFiles}" />
                                    </h:commandLink>
                                </h:panelGroup>


                            </h:form>



                        </div>
                    </div>
                </div>
            </div>
        </h:panelGroup>


    </composite:implementation>

</ui:composition>